\input{header.tex}
\usepackage{expl3, xparse}
\usepackage{ebproof}
\title[short title]{$S5C$: полнота и корректность}

\begin{document}  \frame{\titlepage}

\frame{\frametitle{Исчисления $S5C$ и $S5C'$}
\begin{block}{Теорема о дедуктивной эквивалентности $S5C$ и $S5C'$ (Упражнение)}
\centering
$\vdash_{S5C} \varphi  \iff \vdash_{S5C'} \varphi $ \\
\end{block}


\begin{block}{Теорема о корректности исчисления $S5C$ (Упражнение)}
\centering
$ \vdash_{S5C} \varphi
\Rightarrow \;
\models_{S5C} \varphi
$	
\end{block}
}

\frame{\frametitle{Компактность логики}
\begin{block}{Обозначение}
$\Gamma \models_L \varphi := \forall F (F \models L \Rightarrow  (F \models \Gamma \Rightarrow F \models \varphi ))$
\end{block}

\begin{block}{Определение. Компактность логики.}
Логика $L$ называется компактной е.т.е. 
$\Gamma \models_{L} \bot \Rightarrow \exists \Gamma' \subseteq \Gamma$ т.ч. $\Gamma'$ – конечно и  $\Gamma' \models_{L} \bot$.
Альтернативное определение: ?
\end{block}
}

\frame{\frametitle{Компактность и сильная полнота}
\begin{block}{Теорема}
Логика является сильно полной е.т.е. она полна и компактна.  	
\end{block}
}

\frame{\frametitle{Некомпактность $S5C$}
\begin{block}{Теорема.}
Логика $S5C$ не является компактной.  
\end{block}  
\begin{proof}
$X = \{ \neg C_{ab} p \} \cup \{ E^{n}_{ab} p  \mid n \in \mathbb{N} \}$	 
\begin{enumerate}
\item $X \models_{S5C} \bot $, т.е. $X$ – невыполнимо 
\item $X' \not \models_{S5C} \bot $, где $X' \subseteq X$ и $X' $ – конечно
\end{enumerate}
\end{proof}  
\begin{block}{Следствие}
	Логика $S5C$ не является сильно полной.
\end{block}
}

\frame{\frametitle{Полнота (по Крипке) $S5C$}

\begin{block}{Теорема}
Логика $S5C$ является полной (по Крипке), т.е.
$\models_{S5C} \varphi \iff \vdash_{S5C} \varphi $
\end{block}
}

\frame{\frametitle{Замыкание $cl(\varphi)$}
\begin{block}{Определение. Замыкание}
Пусть $cl: ELC \mapsto \mathcal{P}(ELC )$ функция т.ч. $cl(\varphi)$ – наименьшее множество, удовлетворяющее следующим условиям:
\begin{enumerate}
\item $Sub(\varphi) \subseteq cl(\varphi)$
\item если $\psi \in cl(\varphi)$ и $\psi$ не начитается с $\neg$, то 
$\neg \psi \in cl(\varphi)$
\item если $C_G \psi \in cl(\varphi)$, то $\{K_i C_G \psi \mid i \in G \} \subseteq cl(\varphi)$
\end{enumerate}

\end{block}

\begin{exampleblock}{Пример}
\begin{itemize}
\item $cl(C_{ab}p) = \{p, \neg p, C_{ab}p, \neg C_{ab}p, K_a C_{ab}p, \neg K_a C_{ab}p,  K_b C_{ab}p, \neg K_b C_{ab}p \}$
\end{itemize}
\end{exampleblock}

\begin{block}{Утверждение}
Для любого $\varphi \in ELC$: $cl(\varphi)$ – конечно
\end{block}
}

\frame{\frametitle{Максимальность и непротиворечивость}
\begin{mydef} Множество формул $X \in L_{KC}$ называется \alert{$S5C$–~непротиворечивым} е.т.е. 
\begin{itemize}
\item[(a)] $X \not \vdash_{S5C} \bot$ 
\item[(b)] не существует $\varphi_1, \dots \varphi_n \in X$ т. ч. $\vdash_{S5C} \neg (\varphi_1 \wedge \dots \wedge \varphi_n)$
\end{itemize}
Упражнение: докажите, что условия (a) и (b)  эквивалентны
\end{mydef}

Обозначение: $\boxed{\Phi = cl(\varphi)$ для $\varphi \in L_{KC}}$ 

\begin{block}{Определение.} Будем говорить, что множество $X \subset \Phi$ является \alert{$\Phi$-максимальным $S5C$-непротиворечивым} е.т.е.
\begin{itemize}
\item  $X$ — $S5C$–непротиворечиво и	
\item $\forall Y \in \Phi (X \subset Y \Rightarrow Y \vdash_{S5C} \bot )$.
\end{itemize}
\end{block}

}

\frame{\frametitle{Конечная каноническая модель}
\begin{mydef} Обозначим $\Phi= cl(\varphi)$ для формулы $\varphi \in L_{KC}$. $M^{\Phi} = (W^{\Phi}, (\sim_i^{\Phi})_{i \in Ag}, V^{\Phi})$ – \alert{конечная каноническая модель}, где 
\begin{itemize}
	\item $W^{\Phi} = \{X \subset \Phi \mid X - \Phi\text{-м.} S5C\text{-н.м. формул} \} $
	\item $X \sim^{\Phi}_{i} Y:= \forall \varphi \in \Phi : K_i \varphi \in X \Rightarrow	 \varphi \in Y $ для любого $i \in Ag$
	 \item $X \models p \iff p \in X$ 
\end{itemize}
\end{mydef}

 
\begin{exampleblock}{Упражнение}
Используя следующее обозначение: $\boxed{\#_iX:= \{ \varphi \mid K_i \varphi \in X \}}$, переформулировать $X \sim^{c}_{i} Y$
\end{exampleblock}

}

\frame{\frametitle{Схема доказательства}
\begin{block}{Теорема о корректности и полноте исчисления $S5C$}
\begin{center}
$\forall \varphi \in L_{KC}\;  \models_{S5} \varphi \iff \vdash_{S5C} \varphi$
\end{center}
\begin{proof}
($\Leftarrow$) Корректность. Проверка общезначимости аксиом и правил вывода исчисления $S5C$ (Упражнение) \\
($\Rightarrow)$ Полнота. 
\begin{center}
$\not \vdash_{S5C} \varphi \Rightarrow  \neg \varphi \not   \vdash_{S5C} \bot \Rightarrow \{\neg \varphi\}\subset X \in W^\Phi \Rightarrow M^\Phi, X \models \neg \varphi \Rightarrow (M^\Phi \in S5 \Rightarrow \; \not \models_{S5} \varphi )$ 
\end{center}
Нужно доказать: 
\begin{itemize}
\item Лемма об истинности
\item Каноничность $M^\Phi \in S5$
\end{itemize}
\end{proof}
\end{block}
}


\frame{\frametitle{Лемма об истинности}
\begin{block}{Лемма}
Пусть $\Phi$ замыкание формулы $\varphi_0$, $M^\Phi$ – к.к.м., $X \in W^\Phi$
\begin{center}
\alert{$\forall \varphi' \in \Phi: \varphi' \in X \iff M^\Phi, X \models \varphi'$}
\end{center}	
\begin{proof} Докажем индукцией по построению $\varphi'$.
\begin{itemize}
\item[БИ] $\varphi'=p$
\item[ШИ]
\begin{itemize}
\item[Сл.1] $\varphi'= \neg \varphi_1$	
\item[Сл.2] $\varphi'= \varphi_1 \wedge \varphi_2$
\item[Сл.3] $\varphi'= K_i \varphi$	
\item[Сл.4] \alert{$\varphi'= C_G \varphi$}
\end{itemize}
\end{itemize}
	
\end{proof}

\end{block}

}

\frame{\frametitle{Сл.4 $\varphi'= C_G \varphi$}
\begin{block}{Обозначения}
\begin{itemize}	
\item $\underline{X}:=  \varphi_1 \wedge \dots \wedge \varphi_n$, где $X = \{\varphi_1, \dots , \varphi_n \}$,
\item $S:= \{X \in W^\Phi \mid M^\Phi, X \models C_G \varphi\}$, $\overline{S}:= W^\Phi \setminus S$
\item $\chi:= \bigvee \{ \underline{X} \mid X \in S \}$
\end{itemize}
\end{block}

}

\frame{\frametitle{Сл.4. ($\Leftarrow$) $C_G \varphi \in X \Leftarrow M^\Phi, X \models C_G \varphi$
}

\scalebox{.78}{
\begin{tabular}{ccc}
$\boxed{S:= \{X' \in W^c \mid M^c, X' \models C_G \varphi\}}$ &
$\boxed{\chi:= \bigvee \{ \underline{X'} \mid X' \in S \}}$ &
$\boxed{\overline{S}:= W^c \setminus S}$
\end{tabular}
}


\begin{figure}
\resizebox{\textwidth}{!}{ 
\begin{prooftree}
\hypo{\vdash \underline{X} \to \chi }

\hypo{\vdash \chi \to E_G (\bigwedge \limits_{Y' \in \overline{S}} \neg \underline{Y'})} 
\hypo{\vdash \bigwedge \limits_{Y' \in \overline{S}} \neg \underline{Y'} \leftrightarrow  \bigvee \limits_{X' \in S} \underline{X'} }
\infer1{\vdash (\bigwedge \limits_{Y' \in \overline{S}} \neg \underline{Y'}) \leftrightarrow \chi}
\infer2{\vdash \chi \to E_G \chi}
\infer1{\vdash C_G (\chi \to E_G \chi)}     \hypo{\vdash C_G (\chi \to E_G \chi) \to (\chi \to C_G \chi) }
\infer2{\vdash \chi \to C_G \chi }

\hypo{\vdash \chi \to \varphi}
\infer1{\vdash C_G \chi \to C_G \varphi}

\infer2{\vdash \chi \to C_G \varphi}

\infer2{\vdash \underline{X} \to C_G \varphi}

\infer1{X \vdash C_G \varphi}

\infer1{C_G \varphi \in X}

\end{prooftree}   
}
\end{figure}
}


\frame{
\begin{tabular}{cc}
$\boxed{S:= \{X' \in W^c \mid M^c, X' \models C_G \varphi\}}$ &
$\boxed{\chi:= \bigvee \{ \underline{X'} \mid X' \in S \}}$ 
\end{tabular}

\begin{block}{Лемма $\vdash \underline{X} \to \chi$}
  \alert{$\blacktriangleright$}  
Доказательство: по построению $\chi$ (по КЛВ).
  \alert{$\blacktriangleleft$}	
\end{block}
}


\frame{
\scalebox{.78}{
\begin{tabular}{ccc}
$\boxed{S:= \{X' \in W^c \mid M^c, X' \models C_G \varphi\}}$ &
$\boxed{\chi:= \bigvee \{ \underline{X'} \mid X' \in S \}}$ &
$\boxed{\#_iX:= \{ \psi \mid K_i \psi \in X \}}$
\end{tabular}
}

\begin{block}{Лемма: $\vdash \chi \to \varphi$}
\alert{$\blacktriangleright$} Достаточно доказать, что для любого $X \in S \vdash \underline{X} \to \varphi$	
%TODO исправить ссылки на номера строк
\resizebox{\textwidth}{!}{ 
\centering
\begin{fitch} 
\fh \fw{X} \; X \in S \\
\fa M^c, X \models C_G \varphi & $X \in S$  \\ 
\fa M^c, X \models K_i \varphi 	\text{ для } i \in G & 1  \\
\fa y_0 := \#_iX \cup \{ \neg \varphi \} & постр.  \\   
\fa \fh   y_0 \not \vdash \bot & $\rhd: \text{<<}\bot\text{>>}$  \\ 
\fa \fa y_0 \subseteq Y \in W^c & \text{по л.Линд.} \\ 
\fa \fa X \sim^c_i Y & по постр. $Y$\\ 
\fa \fa M^c, Y \models \varphi & 1, 4
\end{fitch}

\begin{fitch} 
\ftag{9}{\fb \fb \varphi \in Y}  & \text{по п.и.}  \setcounter{fitchcounter}{9} \\
\fa \fa \neg \varphi \in Y  & \text{по постр.} $Y$  \\ 
\fa \fa  \text{<<}\bot\text{>>}  & 6, 7 \\
\fa y_0 \vdash \bot  & \\ 
\fa \#_iX \vdash \varphi & 4 \\ 
\fa X \vdash \#_iX  & 3 \\ 
\fa X \vdash \varphi  &  5, 6 \\ 
\fa \vdash \underline{X} \to \varphi & 7
\end{fitch}
}

\alert{$\blacktriangleleft$}
\end{block}
}

%http://www.actual.world/resources/tex/doc/Proofs.pdf

\frame{
\scalebox{.78}{
\begin{tabular}{ccc}
$\boxed{S:= \{X' \in W^c \mid M^c, X' \models C_G \varphi\}}$ &
$\boxed{\chi:= \bigvee \{ \underline{X'} \mid X' \in S \}}$ 
\end{tabular}
}

\begin{block}{Лемма: $\vdash \chi \to E_G (\bigwedge \limits_{Y' \in \overline{S}} \neg \underline{Y'})$}

\alert{$\blacktriangleright$}   
Достаточно доказать, что $\forall i \in G \; \forall X \in S \; \forall Y \in \overline{S} \; \vdash \underline{X} \to K_i \neg \underline{Y} $   
\resizebox{\textwidth}{!}{ 
\begin{fitch}
\fb \fw{i} \; i \in G    \\
\fa \fw{X} \; X \in S     \\
\fj \fw{Y} \; Y \in W^\Phi \setminus S    \\
\fa M^c, X \models C_G \varphi & 2     \\ 
\fa M^c, Y \not \models C_G \varphi & 3    \\
\fa X \not \sim^{c}_{i}Y &  из 2,3      \\
\fa \exists \psi:  K_i \psi \in X, \psi \not \in Y     \\
\fa \neg \psi \in Y 
\end{fitch} 
  
\begin{fitch} 
\ftag{9}{\fa Y \vdash \neg  \psi   } \setcounter{fitchcounter}{9}   \\
\fa \vdash \underline{Y} \to \neg \psi   \\
\fa \vdash \psi \to \neg\underline{Y}   \\
\fa \vdash K_i \psi \to K_i \neg \underline{Y}   \\
\fa X \vdash K_i \psi  & по постр. $\psi$    \\
\fa \vdash  \underline{X} \to  K_i \psi    \\
\fa \vdash \underline{X} \to K_i \neg \underline{Y}
\end{fitch}
}
  \\ \alert{$\blacktriangleleft$}
\end{block}
}

\frame{
\begin{block}{Лемма: $\forall S \subseteq W^c \vdash \bigwedge \{Y \mid Y \in \overline{S} \} \leftrightarrow  \bigvee \{ X \mid X \in S\}$, где $\overline{S}:= W^c \setminus S$ }
\alert{$\blacktriangleright$} Доказательство собирается из следующих утверждений:
\begin{enumerate}
\item $\forall X, Y \in W^c$ т.ч. $X \not = Y \vdash \neg (\underline{X} \wedge \underline{Y})$
\item $\vdash \bigvee \{ \underline{X} \mid X \in W^c \}$	
\end{enumerate}
\alert{$\blacktriangleleft$}	
\end{block}

\begin{exampleblock}{Упражнение} Собрать доказательство леммы из утверждений. Подсказка: понадобится только КЛВ.
\end{exampleblock}
}

\frame{
\begin{block}{Утверждение: $\forall X, Y \in W^\Phi$ т.ч. $X \not = Y \vdash \neg (\underline{X} \wedge \underline{Y})$}	
\begin{center}
\begin{fitch}
\fb \fw{X} \; X \in W^\Phi \\
\fa \fw{Y} \; Y \in W^\Phi  \\ 
\fj  X \not = Y \\ 
\fa X \subset (X \cup Y), Y \subset (X \cup Y) & 1 теория множеств \\
\fa X \cup Y \vdash \bot &  2 по опр. м.н.м \\
\fa \underline{X}, \underline{Y} \vdash \bot & 3\\
\fa \vdash \neg (\underline{X} \wedge \underline{Y}) & 4 
\end{fitch}
\end{center}
\end{block}
}


\frame{
\begin{block}{Утверждение $\vdash \bigvee \{ \underline{X} \mid X \in W^\Phi \}$}
\end{block}

\resizebox{0.95\textwidth}{!}{ 
\begin{fitch}	
\fh \not \vdash \bigvee \{ \underline{X} \mid X \in W^\Phi \} & $\rhd$ <<$\bot$>> \\
\fa \not \vdash  \underline{X_1} \vee \dots \vee \underline{X_n}, X_i \in W^\Phi &  \\
\fa \forall X_i \in W^\Phi \not \vdash \underline{X_i} & \\
\fa \forall X_i \in W^\Phi \exists \varphi  \in X_i \not \vdash \varphi  &  \\
\fa \not \vdash h(X_1) \vee \dots \vee h(X_n) & $h(X_i):= \varphi \text{ т.ч. } \varphi \in X_i  \text{ и } \not \vdash \varphi$  \\
\fa  \neg h(X_1), \dots, \neg h(X_n) \not \vdash \bot  \\
\fa \{ \neg h(X_1), \dots , \neg h(X_n) \} \subseteq X_j \in W^\Phi & по л. Линд. \\
\fa h(X_j) \in X_j \\
\fa \neg h(X_j) \in X_j \\
\fa \text{<<}\bot\text{>>}
\end{fitch} 
 }
}



\frame{\frametitle{Каноничность к.к.м.}

\begin{block}{Определение} Класс моделей $S5$.	
\end{block}


\begin{block}{Лемма}
$M^\Phi \in S5$, то есть, $\sim^\Phi_i$ – рефлексивно, симметрично и транзитивно.
\end{block}
}

\frame{\frametitle{Рефлексивность $\sim^\Phi_i$ }
\alert{$\blacktriangleright$} 
\begin{center}
\begin{fitch}
%1%
\fh \fw{X} \; X \in W^\Phi & $\rhd \; X \sim^\Phi_i X
	\Leftrightarrow \rhd \; \forall \varphi (K_i \varphi \in X \Rightarrow \varphi \in X)$ \\
%2%
	\fa \fh \fw{\varphi} \; K_i \varphi \in X & $\rhd \; \varphi \in X$ \\ 
%3%
	\fa \fa \varphi \in X & из 2, поскольку $\varphi \in \Phi$, $\vdash_{S5C} K_i \varphi \to \phi$ \\
%4%
	\fa \forall \varphi (K_i \varphi \in X \Rightarrow \varphi \in X) &  В$\forall\Rightarrow$(2-3)\\
%5%
	\fa X \sim^\Phi_i X & 4 по опр. $\sim^\Phi_i$ \\
%6%
	\forall X \in W^\Phi: X \sim^\Phi_i X & В$\forall$(1-5)
\end{fitch} 
\end{center}
\alert{$\blacktriangleleft$} 
}


%\frame{\frametitle{Каноничность к.к.м.}
%\begin{block}{Упражнение}
%Докажите, что $\sim^\Phi_i$ – евклидово.
%\end{block}
%}

\end{document}