\input{header.tex}
\usepackage{expl3, xparse}
\usepackage{ebproof}
\title[short title]{Сложные случаи: PALC, S5CD, PALCD}

\begin{document}  \frame{\titlepage}

\frame{\frametitle{Что значит $[!\varphi]C_G\psi$?}
\begin{mydef}[$G$--путь, $x\sim_Gy$] Пусть $x, y \in W$, $G\subseteq Ag$. Будем говорить, что существует \alert{$G$--путь} из $x$ в $y$ (обозначение: \alert{$x\sim_Gy$}), если найдутся такие $y_1, \dots y_n \in W$ и $i_1, \dots , i_n \in G$, что $x\sim_{i_1}y_1\sim_{i_2} \dots \sim_{i_n}y_n=y$.
\end{mydef}

%TODO исправить: развернуть определение G-пути
\begin{mydef}[$G$--$\varphi$--путь]
Пусть $x, y \in W$, $G\subseteq Ag$. Будем говорить, что существует \alert{$G$--$\varphi$--путь} из $x$ в $y$ (обозначение: \alert{$x\sim_{G, \varphi}y$}), если 
найдутся такие $y_1, \dots y_n \in W$ и $i_1, \dots , i_n \in G$, что  1) $x\sim_{i_1}y_1\sim_{i_2} \dots \sim_{i_n}y_n=y$ и 2) $M,x, y_1, \dots, y_n \models \varphi$.
\end{mydef}
}

\frame{\frametitle{Что значит $[!\varphi]C_G\psi$?}

\begin{exampleblock}{Упражнение} Докажите, что 
	$\big(\bigcup \limits_{i \in G} \sim^{!\varphi}_i\big)^*  = \; \sim_{G, \varphi}$
\end{exampleblock}

}


\frame{\frametitle{Что значит $[!\varphi]C_G\psi$?}
\begin{block}{Утверждение: $M, x \models [!\varphi]C_G\psi$ е.т.е. $\forall y (x \sim_{G, \varphi}y \Rightarrow M, y \models [!\varphi]\psi)$}
\end{block}
\pause
\alert{$\blacktriangleright$}  \pause
\begin{enumerate}[<+->] 
\item $M, x \models [!\varphi]C_G\psi \iff$ 
\item  $M, x \models \varphi \Rightarrow M^{!\varphi}, x \models  C_G\psi \iff$ 
\item $M, x \models \varphi \Rightarrow \forall y (x\big(\bigcup \limits_{i \in G} \sim^{!\varphi}_i\big)^*y \Rightarrow M^{!\varphi}, y \models \psi) \iff$ 
\item  $M, x \models \varphi \Rightarrow \forall y (x\sim_{G, \varphi}y \Rightarrow M^{!\varphi}, y \models \psi) \iff$ 
\item  $\forall y (M, x \models  \varphi \Rightarrow (x\sim_{G, \varphi}y \Rightarrow M^{!\varphi}, y \models \psi)) \iff$ 
\item  $\forall y ((M, x \models  \varphi \wedge x\sim_{G, \varphi}y) \Rightarrow M^{!\varphi}, y \models \psi)) \iff$ 
\item  $\forall y ( x\sim_{G, \varphi}y  \Rightarrow M^{!\varphi}, y \models \psi) \iff$ 
\item  $\forall y ( (x\sim_{G, \varphi}y \wedge M, y \models \varphi) \Rightarrow M^{!\varphi}, y \models \psi) \iff $ 
\item  $\forall y (x\sim_{G, \varphi}y \Rightarrow ( M, y \models \varphi \Rightarrow M^{!\varphi}, y \models \psi)) \iff$ 
\item  $\forall y (x\sim_{G, \varphi}y \Rightarrow M, y \models [!\varphi]\psi)$
\end{enumerate}
\pause \alert{$\blacktriangleleft$} 
}

\frame{\frametitle{$PALC$}
\begin{block}{Утверждение}
Формула $[!\varphi]C_G \psi \leftrightarrow (\varphi \to  C_G [!\varphi] \psi)$ не является общезначимой.
\end{block}
\begin{proof} Рассмотрим модель $M, x$
\begin{enumerate}
\item $M, x \models [!p]C_{ab} q$
\item $M, x \models p$
\item $M, x \not \models C_{ab} [!p] q $, поскольку 
$M, x \models \hat{K}_a \hat{K}_b \langle !p \rangle \neg q$
\end{enumerate}
\end{proof}
}

\frame{\frametitle{Публичные объявления и общее знание}
\begin{block}{Лемма}
\begin{center}
\begin{prooftree}
\hypo{\models \chi \to [!\varphi]\psi} 
\hypo{\models (\chi \wedge \varphi) \to E_G \chi}
\infer2{\models \chi \to [!\varphi]C_G\psi}	
\end{prooftree}
\end{center}
\end{block}
}


\frame{
\resizebox{0.9\textwidth}{!}{ 
\begin{fitch}
(a) \models \chi \to [!\varphi] \psi \text{, }(b) \models (\chi \wedge \varphi) \to E_G \chi \\
\fh \fw{M,x} \; M, x \models \chi & $\rhd \; M, x \models [!\varphi]C_G \psi \Leftrightarrow \rhd \; \forall y (x \sim_{G, \varphi}y \Rightarrow M, y \models [!\varphi]\psi) $ \\
\fa \fh \fw{y}\; x \sim_{G, \varphi}y & $\rhd \; M, y \models [!\varphi]\psi$ \\ 
\fa \fa x\sim_{i_1}y_1\sim_{i_2} \dots \sim_{i_n}y_n=y \text{ т.ч. } \\
\ftag{~}{\fa \fa i_1, \dots, i_n \in G \text{ и } M, x, y_1, \dots, y_n \models \varphi} & из 4 по опр. $x \sim_{G, \varphi}y$\\
\fa \fa M, x \models \chi \wedge \phi & 2, 3 \\
\fa \fa M, x \models E_G \chi & 1b, 6 по MP \\
\fa \fa M, x \models K_{i_1} \chi & из 7 т.к. $i_1 \in G$ \\
\fa \fa M, y_1 \models  \chi  & из 5, 8 \\
\fa \fa \vdots & повторяем 6--9 для $y_2, \dots, y_n$ \\
\fa \fa M, y \models  \chi & из 10 \\
\fa \fa M, y \models [!\varphi] \psi & 1, 11 \\
\fa \forall y (x \sim_{G, \varphi}y \Rightarrow M, y \models [!\varphi]\psi) & В$\forall\Rightarrow$ 4--12 \\
\fa M, x \models [!\varphi]C_G \psi & def \\
\models \chi \to [!\varphi]C_G \psi & В$\forall\Rightarrow$ 2--14
\end{fitch}}
}


\frame{\frametitle{Исчисление $PALC$}
\begin{itemize}
\item $S5$
\item $[!\varphi]p \leftrightarrow (\varphi \to p)$	
\item $[!\varphi]\neg \psi  \leftrightarrow (\varphi \to \neg [!\varphi]\psi)$
\item $[!\varphi](\psi \wedge \chi) \leftrightarrow ([!\varphi]\psi \wedge [!\varphi]\chi) $
\item $[!\varphi]K_i \psi \leftrightarrow (\varphi \to K_i [!\varphi] \psi)$
\item Аксиомы и правила вывода $S5C$
\item Правила вывода: $MP$, $NEC$, $RE!$
\item Правило вывода
\begin{center}
\begin{prooftree}
\hypo{\chi \to [!\varphi]\psi} 
\hypo{(\chi \wedge \varphi) \to E_G \chi}
\infer2{\chi \to [!\varphi]C_G\psi}	
\end{prooftree}
\end{center}

\end{itemize}


}

\frame{\frametitle{Полнота и корректность}
\begin{block}{Теорема о полноте: схема доказательства}
\begin{itemize}
\item Замыкание
\item Случай $[!\varphi]C_G\psi$	
\end{itemize}
\end{block}
}



\frame{
\begin{block}{Утверждение: $\vdash [!\varphi]C_G\psi \to (\varphi \to  K_i[!\varphi] C_G \psi)$ для $i \in G$}
\begin{enumerate}
\item $C_G\psi \to K_i C_G\psi $ 
\item $[!\varphi]C_G\psi \to [!\varphi]K_i C_G\psi $
\item $[!\varphi]K_i C_G\psi \to (\varphi \to  K_i[!\varphi] C_G \psi)$
\item $[!\varphi]C_G\psi \to (\varphi \to  K_i[!\varphi] C_G \psi)$
\end{enumerate}	
\end{block}
}

\frame{
\begin{block}{Лемма:  $[!\varphi]C_G\psi \in X \Rightarrow \forall Y (X \sim^{\Phi}_{G,\varphi}Y \Rightarrow  [!\varphi]\psi \in Y)$}
\end{block}
\resizebox{1.0\textwidth}{!}{ 
\begin{fitch}
[!\varphi]C_G\psi \in X \\
\fh \fw{Y} \; X \sim^{\Phi}_{G,\varphi}Y & $\rhd \; [!\varphi]\psi \in Y$ \\
\fa X\sim^{\Phi}_{i_1}Y_1\sim^{\Phi}_{i_2} \dots \sim^{\Phi}_{i_n}Y_n=Y \text{ т.ч. }\varphi \in X, \varphi \in Y_i \text{ и } i_1, \dots , i_n \in G & из 2 по опр. \\
\fa \varphi \to  K_i[!\varphi] C_G \psi \in X & по утв. на сл. 10 и $\varphi \to  K_i[!\varphi] C_G \psi \in X \in \Phi$ \\
\fa \varphi \in X & из 3\\
\fa K_{i_1}[!\varphi] C_G \psi \in X & из 4,5 по MP\\ 
\fa X\sim^{\Phi}_{i_1}Y_1 & из 3\\
\fa [!\varphi] C_G \psi \in Y_1 & из 6,7 по опр. \\
\fa \vdots & повторяем шаги 5--8 для  $Y_2$ и т.д. до  $Y_n=Y$ \\
\fa [!\varphi] C_G \psi \in Y & из 9 \\
\fa [!\varphi] \psi \in Y & из 10, $\vdash C_G \psi \to [!\varphi]  \psi $ и $[!\varphi]  \psi \in \Phi$ \\
\forall Y (X \sim^{\Phi}_{G,\varphi}Y \Rightarrow  [!\varphi]\psi \in Y) & 2--11 В$\forall\Rightarrow$
\end{fitch}
}
}


\frame{\frametitle{$[!\varphi]C_G\psi \in X \Rightarrow M^{\Phi}, X \models [!\varphi]C_G\psi$}

\begin{block}{Что мы уже доказали?}
\begin{enumerate}
	\item $M, x \models [!\varphi]C_G\psi$ е.т.е. $\forall y (x \sim_{G, \varphi}y \Rightarrow M, y \models [!\varphi]\psi)$
	\item $[!\varphi]C_G\psi \in X \Rightarrow \forall Y (X \sim^{\Phi}_{G,\varphi}Y \Rightarrow  [!\varphi]\psi \in Y)$
\end{enumerate}	
\end{block}


\begin{fitch}
[!\varphi]C_G\psi \in X \\
\forall Y (X \sim^{\Phi}_{G,\varphi}Y \Rightarrow  [!\varphi]\psi \in Y) \\
\forall Y (X \sim^{\Phi}_{G,\varphi}Y \Rightarrow  M^{\Phi}, Y \models [!\varphi]\psi ) &  по ПИ \\
M^{\Phi}, X \models [!\varphi]C_G\psi
\end{fitch}
}

\section{RC}
\frame{\frametitle{Условное общее знание}
\begin{mydef}[RC]
$M, x \models C^{\psi}_G \varphi$ е.т.е.
$\forall y (x\big(\bigcup \limits_{i \in G} \! \sim_i \cap \; (W \times [\psi]_M)  \big)^+y \Rightarrow M, y \models \varphi )$
\end{mydef}

\begin{block}{Утверждение}
Общее знание выразимо через условное общее знание:
\begin{center}
	$C_G \varphi \equiv C^{\top}_G \varphi$
\end{center}	
Доказательство: упражнение
\end{block}
}

\frame{\frametitle{Исчисление для условного общего знания}

\begin{block}{Исчисление $S5_mRC$}
Аксиомные схемы:
\begin{description}
\item[($S5_{K}$)] Аксиомные схемы $S5$ для $K_i$
\item[($K_{RC}$)] $C^\chi_G(\varphi \to \psi) \to (C^\chi_G \varphi \to C^\chi_G \psi)$ 
\item[($mix_{RC}$)] $C^\psi_G \varphi \leftrightarrow E_G(\psi \to (\varphi \wedge C^\psi_G \varphi) )$ 
\item[($ind_{RC}$)] $C^\psi_G (\varphi \to E_G(\psi \to \varphi)) \to (E_G(\psi \to \varphi) \to C^\psi_G \varphi)$
\end{description}

Правила вывода: 
\begin{multicols}{3}
\begin{prooftree}
\hypo{\varphi} 
\hypo{\varphi \to \psi }
\infer2[$MP$]{\psi}	
\end{prooftree}

\begin{prooftree}
\hypo{\varphi} 
\infer1[$G_K$]{K_i \varphi}	
\end{prooftree}

\begin{prooftree}
\hypo{\varphi} 
\infer1[$G_CK$]{C^\psi_G \varphi}	
\end{prooftree}
\end{multicols}
\end{block}
}

\frame{\frametitle{Аксиома редукции для условного общего знания}
\begin{block}{Исчисление $S5_m[]$-$RC$ ($PAL$-$RC$)}
\begin{description}
\item[($S5_mRC$)] Аксиомные схемы и правила вывода исчисления $S5_mRC$
\item[($R_{RC}$)] $[!\varphi]C^\chi_G \psi \leftrightarrow 
(\varphi \to C^{\varphi \wedge [!\varphi]\chi}_G[!\varphi]\psi)
 $
\end{description}
\end{block}

\begin{exampleblock}{Упражнение}
Сформулируйте аксиому редукции для общего знания:
$[!\varphi]C_G \psi \leftrightarrow ? $
\end{exampleblock}

\begin{exampleblock}{Упражнение} Для формулы $[!p]C_Gq$ найдите эквивалентную, но из языка $\ELRC$.	
\end{exampleblock}
}

\section{Сравнение языков по выразительной силе}

\frame{\frametitle{Сравнение языков по выразительной силе}
\begin{itemize}
\item $\ELC \prec \PALC$ 
$$[!(\neg p \to K_a \neg p)]C_{ab}\neg p$$
\item $\ELRC \equiv \PALRC$
\item $\PALC \prec \ELRC$
$$ C^{p}_{ab}\neg K_a p$$	
\end{itemize}
Подробнее: [vanDitmarsch2008]
}

\end{document}