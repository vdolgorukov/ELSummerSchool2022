\input{header.tex}
\usepackage{expl3, xparse}
\usepackage{ebproof}
\title[short title]{$S5C$: полнота и корректность}
\newcounter{lnumber}
\setcounter{lnumber}{1}

\begin{document}  \frame{\titlepage}

\frame{\frametitle{Эпистемическая логика + общее знание}
\begin{block}{Исисление S5C}
Аксиомные схемы:
\begin{itemize}
\item Тавтологии КЛВ
\item Аксиомные S5 для каждого оператора $K_i$
\item ($K_C$) $C_G (\varphi \to \psi) \to (C_G \varphi \to C_G \psi)$
\item ($fix$) $C_G \varphi \to E_G(\varphi \wedge C_G \varphi)$ 
\item($ind$) $C_G (\varphi \to E_G \varphi) \to (\varphi \to C_G \varphi)$
\end{itemize}
Правила вывода: MP, $G_K$, $G_C$
\end{block}
}


\frame{\frametitle{Эпистемическая логика + общее знание}
\begin{block}{Исисление S5C'}
Аксиомные схемы:
\begin{itemize}
\item Тавтологии КЛВ
\item Аксиомные S5 для каждого оператора $K_i$
\item ($K_C$) $C_G (\varphi \to \psi) \to (C_G \varphi \to C_G \psi)$
\item ($fix$) $C_G \varphi \to E_G(\varphi \wedge C_G \varphi)$ 
\end{itemize}
Правила вывода: MP, $G_K$ 
\begin{center}
\begin{prooftree}
\hypo{\varphi \to E_G (\psi \wedge \varphi)}
\infer1[$ind_R$]{\varphi \to C_G \psi}	
\end{prooftree}
\end{center}

\end{block}
}


\frame{\frametitle{Исчисления $S5C$ и $S5C'$}
\begin{block}{Теорема о дедуктивной эквивалентности $S5C$ и $S5C'$ (Упражнение)}
\centering
$\vdash_{S5C} \varphi  \iff \vdash_{S5C'} \varphi $ \\
\end{block}


\begin{block}{Теорема о корректности исчисления $S5C$ (Упражнение)}
\centering
$ \vdash_{S5C} \varphi
\Rightarrow \;
\models_{S5C} \varphi
$	
\end{block}
}

\frame{\frametitle{Компактность логики}
\begin{block}{Обозначение}
$\Gamma \models_L \varphi := \forall F (F \models L \Rightarrow  (F \models \Gamma \Rightarrow F \models \varphi ))$
\end{block}

\begin{block}{Определение. Компактность логики.}
Логика $L$ называется компактной е.т.е. 
$\Gamma \models_{L} \bot \Rightarrow \exists \Gamma' \subseteq \Gamma$ т.ч. $\Gamma'$ – конечно и  $\Gamma' \models_{L} \bot$.
Альтернативное определение: ?
\end{block}
}

\frame{\frametitle{Компактность и сильная полнота}
\begin{block}{Теорема}
Логика является сильно полной е.т.е. она полна и компактна.  	
\end{block}
}

\frame{\frametitle{Некомпактность $S5C$}
\begin{block}{Теорема.}
Логика $S5C$ не является компактной.  
\end{block}  
\begin{proof}
$X = \{ \neg C_{ab} p \} \cup \{ E^{n}_{ab} p  \mid n \in \mathbb{N} \}$	 
\begin{enumerate}
\item $X \models_{S5C} \bot $, т.е. $X$ – невыполнимо 
\item $X' \not \models_{S5C} \bot $, где $X' \subseteq X$ и $X' $ – конечно
\end{enumerate}
\end{proof}  
\begin{block}{Следствие}
	Логика $S5C$ не является сильно полной.
\end{block}
}

\frame{\frametitle{Полнота (по Крипке) $S5C$}

\begin{block}{Теорема}
Логика $S5C$ является полной (по Крипке), т.е.
$\models_{S5C} \varphi \iff \vdash_{S5C} \varphi $
\end{block}
}


\frame{\frametitle{Замыкание Фишера-Ладнера}
Идея: множество формул, которые могут понадобиться при работе с к.к.м. 
\begin{block}{Замыкание} Пусть $cl(\varphi)$ наименьшее множество формул, замкнутое по следующим правилам:
\begin{enumerate}
\item $\varphi \in cl(\varphi)$
\item если $\psi \in cl(\varphi)$, то $Sub(\psi) \subseteq cl(\varphi)$
\item если $\psi \in cl(\varphi)$ и $\psi$ не начинается с отрицания, то $\neg \psi \in cl(\varphi)$
\item если $C_G \psi \in cl(\varphi)$, то $\{K_i C_G \psi \mid i \in G \} \subseteq cl(\varphi)$
\end{enumerate}	
\end{block}

}


\frame{

\begin{block}{Утверждение}
Для любого $\varphi \in L_{KC}$: $cl(\varphi)$ – конечно
\end{block}
\begin{proof}Упражнение.
\end{proof}
}


\frame{\frametitle{Максимальность и непротиворечивость}
\begin{mydef} Множество формул $X \in L_{KC}$ называется \alert{$S5C$–~непротиворечивым} е.т.е. 
\begin{itemize}
\item[(a)] $X \not \vdash_{S5C} \bot$ 
\item[(b)] не существует $\varphi_1, \dots \varphi_n \in X$ т. ч. $\vdash_{S5C} \neg (\varphi_1 \wedge \dots \wedge \varphi_n)$
\end{itemize}
Упражнение: докажите, что условия (a) и (b)  эквивалентны
\end{mydef}

Обозначение: $\boxed{\Phi = cl(\varphi)$ для $\varphi \in L_{KC}}$ 

\begin{block}{Определение.} Будем говорить, что множество $X \subset \Phi$ является \alert{$\Phi$-максимальным $S5C$-непротиворечивым} е.т.е.
\begin{itemize}
\item  $X$ — $S5C$–непротиворечиво и	
\item $\forall Y \in \Phi (X \subset Y \Rightarrow Y \vdash_{S5C} \bot )$.
\end{itemize}
\end{block}

}


\section{ККМ}
\frame{\frametitle{Конечная каноническая модель (к.к.м.)}

\begin{block}{}Определение.  Обозначим $\Phi= cl(\varphi)$ для формулы $\varphi \in L_{KC}$. $M^{\Phi} = (W^{\Phi}, (\sim_i^{\Phi})_{i \in Ag}, V^{\Phi})$ – \alert{конечная каноническая модель}, где 
\begin{itemize}
	\item $W^{\Phi} = \{X \subset \Phi \mid X - \Phi\text{-м.} S5C\text{-н.м. формул} \} $
	\item $X \sim^{\Phi}_{i} Y:=  K_i \psi \in X \Leftrightarrow K_i \psi \in Y$ для $K_i \psi \in \Phi$
	 \item $X \models p \iff p \in X$ 
\end{itemize}
\end{block}

\begin{exampleblock}{Обозначение}
$K_i X := \{K_i \varphi \mid K_i \varphi \in X \}$
\end{exampleblock}

}


\frame{\frametitle{Каноническая модель ($M^c$) vs. к.к.м. ($M^\Phi$)}

\begin{itemize}
\item модели или модели 
\begin{description}
\item[к.м] одна <<конкретная>> модель
\item[к.к.м.] модель строится по конкретной формуле
\end{description}
\item язык
\begin{description}
\item[к.м] модель задействует весь модальный язык
\item[к.к.м.] модель задействует только формулы из замыкания $\Phi$ 
\end{description}
\item миры = м.н.м. 
\begin{description}
\item[к.м] бесконечные множества формул
\item[к.к.м.] конечные множества формул
\end{description}
\item достижимость
\begin{description}
\item[к.м] определяется универсальным образом для каждой логики
\item[к.к.м.] для каждой логики определяется отдельно
\end{description}
\item что можно доказать
\begin{description}
\item[к.м] сильная полнота
\item[к.к.м.] слабая полнота + финитная аппроксимируемость
\end{description}
\end{itemize}


}

\frame{\frametitle{К.м., к.к.м., теория }
\begin{mydef} Пусть $X \subseteq L_{CK}, L \in \{K^C_m, S4^C_m, S5^C_m, \dots \}$, определим \alert{множество следствий}
\begin{center}
$\alert{[X]_L}:= \{ \varphi \in L_{CK} \mid X \vdash_L \varphi \} $	
\end{center}
 
\begin{block}{Утверждение.$[X]_L$ в к.м. ($M^c$)} Если $X \in W^c$, то
$[X]_L \subseteq X$. Более того: $[X]_L = X$
\end{block}

\begin{block}{Утверждение. $[X]_L$ в к.к.м. ($M^\Phi$)} Если $X \in W^\Phi$, то не гарантируется, что
$[X]_L \subseteq X$, но верно, что $[X]_L \cap \Phi \subseteq X$. Более того: $[X]_L \cap \Phi = X$.
\end{block} 
	
\end{mydef}
}

\frame{\frametitle{Схема доказательства}
\begin{block}{Теорема о корректности и полноте исчисления $S5C$}
\begin{center}
$\forall \varphi \in \ELC \;  \models_{S5} \varphi \iff \vdash_{S5C} \varphi$
\end{center}
\begin{proof}
($\Leftarrow$) Корректность. Проверка общезначимости аксиом и правил вывода исчисления $S5C$ (Упражнение) \\
($\Rightarrow)$ Полнота. 
\begin{center}
$\not \vdash_{S5C} \varphi \Rightarrow  \neg \varphi \not   \vdash_{S5C} \bot \Rightarrow \{\neg \varphi\}\subset X \in W^\Phi \Rightarrow M^\Phi, X \models \neg \varphi \Rightarrow (M^\Phi \in S5 \Rightarrow \; \not \models_{S5} \varphi )$ 
\end{center}
Нужно доказать: 
\begin{itemize}
\item Каноничность $M^\Phi \in S5$
\item Лемма об истинности
\end{itemize}
\end{proof}
\end{block}
}

\section{Каноничность}
\frame{\frametitle{Каноничность к.к.м.}

\begin{block}{Определение} Класс моделей $S5$.	
\end{block}


\begin{block}{Лемма}
$M^\Phi \in S5$, то есть, $\sim^\Phi_i$ – рефлексивно, симметрично и транзитивно.
\end{block}
}


\section{Лемма об истинности}
\frame{\frametitle{Лемма об истинности}
\begin{block}{Лемма}
Пусть $\Phi$ замыкание некоторой формулы $M^\Phi$ – к.к.м., $X \in W^\Phi$
\begin{center}
\alert{$\forall \varphi' \in \Phi: \varphi' \in X \iff M^\Phi, X \models \varphi'$}
\end{center}	
\end{block}
Докажем индукцией по построению $\varphi'$.
\begin{itemize}
\item[БИ] $\varphi'=p$
\item[ШИ]
\begin{itemize}
\item[Сл.1] $\varphi'= \neg \varphi$	
\item[Сл.2] $\varphi'= \varphi_1 \wedge \varphi_2$
\item[Сл.3] $\varphi'= K_i \varphi$	
\item[Сл.4] $\varphi'= C_G \varphi$
\end{itemize}
\end{itemize}
}


\frame{\frametitle{БИ, Сл.1, Сл.2}
Повторяем доказательства из теоремы о полноте S5
}

\frame{

\begin{block}{} Обозначения:
\begin{itemize}
\item $K_i X:= \{ K_i \psi \mid K_i \psi \in X\}$
\item $\neg K_i X:= \{\neg K_i \psi \mid\neg K_i \psi \in X\}$ 
\end{itemize}
\end{block}


\begin{block}{}Утверждение.\\
	$(K_i X \cup \neg K_i X) \subseteq Y \Leftrightarrow X \sim^\Phi_i Y$ \\
	
\end{block}

}

\frame{\frametitle{Сл.2 $\varphi'= K_i \varphi$ ($\Rightarrow$)}
\begin{fitch}
\fh K_i \varphi \in X & $\rhd \; M^\Phi, X \models K_i \varphi \Leftrightarrow \rhd \; \forall Y (X\sim^\Phi_iY \Rightarrow M^\Phi, Y \models \varphi )$ \\ 
\fa \fh \fw{Y} \; X\sim^\Phi_iY & $\rhd \; M^\Phi, Y \models \varphi $ \\
\fa \fa K_i \varphi \in Y & из 1, 2 \\
\fa \fa \varphi \in Y & из 3 т.к. $\varphi \in \Phi$ и $\vdash K_i \varphi \to \varphi$ \\ 
\fa \fa M^\Phi, Y \models \varphi & из 4 по ПИ \\
\fa \forall Y (X\sim^\Phi_iY \Rightarrow M^\Phi, Y \models \varphi) \\
\fa M^\Phi, X \models K_i \varphi 
\end{fitch}
}

\frame{\frametitle{Сл.2  $\varphi'= K_i \varphi$ ($\Leftarrow$)}
\resizebox{\textwidth}{!}{ 
\centering
\begin{fitch}
\fh	K_i \varphi \not \in X & $\rhd \; M^\Phi, X \not \models K_i \varphi \Leftrightarrow$ \\
\ftag{~}{\fa } & $\rhd \; \exists  Y (X\sim^\Phi_iY \wedge M^\Phi, Y \not \models \varphi )$ \\ 
\fa \neg K_i \varphi \in X \\ 
\fa \vdash \underline{X} \to \neg K_i \varphi \\
\fa \fh y_0 = K_i X \cup  \neg K_i X \cup \{ \neg \varphi \} \vdash \bot & $\rhd \; \metabot$ \\
\fa \fa K_i X, \neg K_i X  \vdash \varphi \\
\fa \fa \vdash ((K_i \psi_1 \wedge \dots \wedge K_i \psi_n) \wedge
(\neg K_i \chi_1 \wedge \dots \wedge \neg K_i \chi_m)) \to  \varphi \\
\fa \fa \vdash K_i ((K_i \psi_1 \wedge \dots \wedge K_i \psi_n) \wedge
(\neg K_i \chi_1 \wedge \dots \wedge \neg K_i \chi_m)) \to  K_i \varphi  \\
\fa \fa \vdash  ((K_i K_i \psi_1 \wedge \dots \wedge K_i K_i \psi_n) \wedge
(K_i \neg K_i \chi_1 \wedge \dots \wedge K_i \neg K_i \chi_m)) \to  K_i \varphi \\
\fa \fa \vdash  ((K_i \psi_1 \wedge \dots \wedge K_i \psi_n) \wedge
(\neg K_i \chi_1 \wedge \dots \wedge \neg K_i \chi_m)) \to  K_i \varphi \\
\fa \fa  \vdash \underline{X} \to ((K_i \psi_1 \wedge \dots \wedge K_i \psi_n) \wedge
(\neg K_i \chi_1 \wedge \dots \wedge \neg K_i \chi_m)) 
\end{fitch}

     }
}



\frame{
\resizebox{0.45\textwidth}{!}{ \centering
\begin{fitch}
\ftag{11}{
\fa \fa \vdash \underline{X} \to K_i \varphi 
} \setcounter{fitchcounter}{11} \\
\fa \fa \metabot \\
\fa y_0 = K_i X \cup  \neg K_i X \cup \{ \neg \varphi \} \not \vdash \bot  \\
\fa y_0 \subset Y \in W^\Phi \\
\fa X\sim^\Phi_i Y \\
\fa \neg \varphi \in Y \\
\fa \varphi \not \in Y \\
\fa M^\Phi, Y \not \models  \varphi & ПИ \\
\fa \exists  Y (X\sim^\Phi_iY \wedge M^\Phi, Y \not \models \varphi ) \\
\fa M^\Phi, X \not \models K_i \varphi  	
\end{fitch}
                           }
}






\frame{\frametitle{Сл.3 $\varphi'= C_G \varphi$}
\begin{block}{Обозначения}
\begin{itemize}	
\item $\underline{X}:=  \varphi_1 \wedge \dots \wedge \varphi_n$, где $X = \{\varphi_1, \dots , \varphi_n \}$,
\item $S:= \{X \in W^\Phi \mid M^\Phi, X \models C_G \varphi\}$, $\overline{S}:= W^\Phi \setminus S$
\item $\chi:= \bigvee \{ \underline{X} \mid X \in S \}$
\end{itemize}
\end{block}

}




\frame{\frametitle{Сл.3 ($\Leftarrow$) $C_G \varphi \in X \Leftarrow M^\Phi, X \models C_G \varphi$}
\begin{center}
\resizebox{0.7\textwidth}{!}{ 
\begin{tabular}{ccc}
$\boxed{S:= \{X' \in W^c \mid M^c, X' \models C_G \varphi\}}$ &
$\boxed{\chi:= \bigvee \{ \underline{X'} \mid X' \in S \}}$ &
$\boxed{\overline{S}:= W^c \setminus S}$
\end{tabular}
}
\end{center}

\resizebox{1.025\textwidth}{!}{ 
\begin{prooftree}
\hypo{\vdash \underline{X} \to \chi }

\hypo{\vdash \chi \to E_G (\bigwedge \limits_{Y' \in \overline{S}} \neg \underline{Y'})} 
\hypo{\vdash \bigwedge \limits_{Y' \in \overline{S}} \neg \underline{Y'} \leftrightarrow  \bigvee \limits_{X' \in S} \underline{X'} }
\infer1{\vdash (\bigwedge \limits_{Y' \in \overline{S}} \neg \underline{Y'}) \leftrightarrow \chi}
\infer2{\vdash \chi \to E_G \chi}
\infer1{\vdash C_G (\chi \to E_G \chi)}     \hypo{\vdash C_G (\chi \to E_G \chi) \to (\chi \to C_G \chi) }
\infer2{\vdash \chi \to C_G \chi }

\hypo{\vdash \chi \to \varphi}
\infer1{\vdash C_G \chi \to C_G \varphi}

\infer2{\vdash \chi \to C_G \varphi}

\infer2{\vdash \underline{X} \to C_G \varphi}

\infer1{X \vdash C_G \varphi}

\infer1{C_G \varphi \in X}

\end{prooftree}   
}

}


\frame{
\begin{tabular}{cc}
$\boxed{S:= \{X' \in W^c \mid M^c, X' \models C_G \varphi\}}$ &
$\boxed{\chi:= \bigvee \{ \underline{X'} \mid X' \in S \}}$ 
\end{tabular}

\begin{block}{Лемма \arabic{lnumber} $\vdash \underline{X} \to \chi$}
  \alert{$\blacktriangleright$}  
Доказательство: по построению $\chi$ (по КЛВ).
  \alert{$\blacktriangleleft$}	
\end{block}
}


\frame{
\scalebox{.7}{
\begin{tabular}{cccc}
$\boxed{S:= \{X' \in W^c \mid M^c, X' \models C_G \varphi\}}$ &
$\boxed{\chi:= \bigvee \{ \underline{X'} \mid X' \in S \}}$ &
$\boxed{K_i X:= \{ K_i \psi \mid K_i \psi \in X\}}$ & 
$\boxed{\neg K_i X:= \{\neg K_i \psi \mid\neg K_i \psi \in X\}}$ 
\end{tabular}
}

\begin{block}{} Утверждение: $\vdash \chi \to \varphi$
\end{block}

Достаточно доказать, что для любого $X \in S \vdash \underline{X} \to \varphi$.	
%TODO исправить ссылки на номера строк
%TODO добавить \Gamma \vdash \Delta
%TODO добавить транзитивность вывода
\resizebox{\textwidth}{!}{ 
\centering
\begin{fitch} 
\fh \fw{X} \; X \in S & $\rhd \; \vdash \underline{X} \to \varphi$\\
\fa M^c, X \models C_G \varphi & 1  \\ 
\fa M^c, X \models K_i \varphi 	\text{ для } i \in G & 2  \\
\fa \fh y_0 :=  K_i X \cup \neg K_i X  \cup \{ \neg \varphi \} \not \vdash \bot & $\rhd: \text{<<}\bot\text{>>}$ \\   
\fa \fa y_0 \subseteq Y \in W^c & \text{по л.Линд.} \\ 
\fa \fa X \sim^c_i Y & по постр. $Y$\\ 
\fa \fa \neg \varphi \in Y \\

\end{fitch}

\begin{fitch} 
\ftag{8}{\fb \fb M^\Phi, Y \models \varphi }  & \text{}  \setcounter{fitchcounter}{8} \\
\fa \fa \varphi \in Y  & \text{по ПИ}   \\ 
\fa \fa  \text{<<}\bot\text{>>}  &  \\
\fa y_0 \vdash \bot  & \\ 
\fa   K_i X \cup \neg K_i X  \vdash \varphi &  \\ 
\fa X \vdash K_i X \cup \neg K_i X  & по постр. \\ 
\fa X \vdash \varphi  &  \\ 
\fa \vdash \underline{X} \to \varphi & 
\end{fitch}
            }
}


\frame{
\begin{block}{}\textbf{Утверждение}. Пусть $X, Y \in W^\Phi$, тогда
\alert{$ X \not \sim^\Phi_i Y \Rightarrow \; \vdash \underline{X} \to K_i \neg \underline{Y}$}
\end{block}

\resizebox{1.8\textheight}{!}{ 
\begin{fitch}
\fh X \not \sim^\Phi_i Y & $\rhd \; \vdash \underline{X} \to K_i \neg \underline{Y} $ \\
\fa \exists \theta \in \Phi: K_i \theta \in X, \theta \not \in Y \text{ или }
K_i \theta \in Y, \theta \not \in X \\
\fa \fh K_i \theta \in X, \theta \not \in Y  & $\rhd \; \vdash \underline{X} \to K_i \neg \underline{Y} $ \\
\fa \fa \neg \theta \in Y &  \\
\fa \fa Y \vdash \neg \theta \\
\fa \fa \vdash \underline{Y}  \to \neg \theta \\
\fa \fa \vdash \theta \to \neg \underline{Y}   \\
\fa \fa \vdash K_i \theta \to K_i \neg \underline{Y}   \\
\fa \fa \vdash \underline{X} \to K_i \theta \\
\fa \fa \vdash \underline{X} \to K_i \neg \underline{Y} \\
\fa \fh K_i \theta \in Y, \theta \not \in X & $\rhd \; \vdash \underline{X} \to K_i \neg \underline{Y} $  \\
\fa \fa \neg \theta \in X 
\end{fitch} 
\begin{fitch}
\ftag{13}{\fa \fa \vdash \underline{X} \to \neg \theta}  & \setcounter{fitchcounter}{13}  \\
\fa \fa \vdash \theta \to  \neg \underline{X} \\
\fa \fa \vdash K_i \theta \to  K_i \neg \underline{X} \\
\fa \fa \vdash \underline{Y} \to K_i \theta \\
\fa \fa \vdash \underline{Y} \to K_i \neg \underline{X} \\
\fa \fa \vdash \hat{K}_i \underline{X}  \to \neg \underline{Y} \\
\fa \fa \vdash K_i \hat{K}_i \underline{X}  \to K_i \neg \underline{Y} \\
\fa \fa \vdash \underline{X} \to K_i \hat{K}_i \underline{X} \\
\fa \fa \vdash  \underline{X} \to K_i \neg \underline{Y} \\
\fa \vdash  \underline{X} \to K_i \neg \underline{Y}
\end{fitch}
 }
}

\frame{
\begin{block}{}\textbf{Следствие.} Пусть $X, Y \in W^\Phi$, тогда $\underline{X}, \hat{K}_i \underline{Y} \not \vdash \bot \Rightarrow
X \sim^\Phi_i Y  $	
\end{block}
}

%http://www.actual.world/resources/tex/doc/Proofs.pdf


%\frame{
%\begin{block}{Лемма: Пусть $X, Y \in W^\Phi$, тогда $\underline{X}, \hat{K}_i \underline{Y}  \not \vdash \bot \Rightarrow X \sim^\Phi_i Y$}
%\end{block}
%
%\resizebox{\textwidth}{!}{
%\begin{fitch}
%\underline{X}, \hat{K}_i \underline{Y}  \not \vdash \bot \\
%\not \vdash \underline{X} \to  K_i \neg  \underline{Y}  \\
%\fh X \not \sim^\Phi_i Y &  $\rhd \; \metabot $ \\
%\fa \theta \in \Phi: K_i \theta \in X, \theta \not \in Y & из 3 \\
%\fa \neg \theta \in Y \\
%\fa Y \vdash \neg \theta \\
%\end{fitch}
%
%\begin{fitch}
%\ftag{7}{\fa \vdash \underline{Y} \to \neg \theta} \setcounter{fitchcounter}{7} \\
%\fa \vdash \theta \to \neg \underline{Y} \\
%\fa \vdash K_i \theta \to K_i \neg  \underline{Y} \\
%\fa \vdash \underline{X} \to K_i \theta \\
%\fa \vdash \underline{X} \to K_i \neg  \underline{Y}  \\
%\fa \metabot & 2, 11
%\end{fitch} }
%}

\frame{
\scalebox{.78}{
\begin{tabular}{ccc}
$\boxed{S:= \{X' \in W^c \mid M^c, X' \models C_G \varphi\}}$ &
$\boxed{\chi:= \bigvee \{ \underline{X'} \mid X' \in S \}}$ 
\end{tabular}
}

%TODO переделать по предыдущей лемма
%добавить счетчик для лемм и теорем
\begin{block}{Лемма: $\vdash \chi \to E_G (\bigwedge \limits_{Y' \in \overline{S}} \neg \underline{Y'})$}
  
Достаточно доказать, что $\forall i \in G \; \forall X \in S \; \forall Y \in \overline{S} \; \vdash \underline{X} \to K_i \neg \underline{Y} $   
\end{block}
\begin{fitch}
\fb \fw{i} \; i \in G    \\
\fa \fw{X} \; X \in S     \\
\fj \fw{Y} \; Y \in W^\Phi \setminus S    \\
\fa M^c, X \models C_G \varphi & 2     \\ 
\fa M^c, Y \not \models C_G \varphi & 3    \\
\fa X \not \sim^{c}_{i}Y &  из 2,3      \\
\fa \vdash \underline{X} \to K_i \neg \underline{Y} & по лемме
\end{fitch} 
   
}

\frame{
\begin{block}{Лемма: $\forall S \subseteq W^c \vdash \bigwedge \{Y \mid Y \in \overline{S} \} \leftrightarrow  \bigvee \{ X \mid X \in S\}$, где $\overline{S}:= W^c \setminus S$ }
\alert{$\blacktriangleright$} Доказательство собирается из следующих утверждений:
\begin{enumerate}
\item $\forall X, Y \in W^c$ т.ч. $X \not = Y \vdash \neg (\underline{X} \wedge \underline{Y})$
\item $\vdash \bigvee \{ \underline{X} \mid X \in W^c \}$	
\end{enumerate}
\alert{$\blacktriangleleft$}	
\end{block}

\begin{exampleblock}{Упражнение} Собрать доказательство леммы из утверждений. Подсказка: понадобится только КЛВ.
\end{exampleblock}
}

\frame{
\begin{block}{Утверждение: $\forall X, Y \in W^\Phi$ т.ч. $X \not = Y \vdash \neg (\underline{X} \wedge \underline{Y})$}	
\end{block}
\begin{center}
\begin{fitch}
\fb \fw{X} \; X \in W^\Phi \\
\fa \fw{Y} \; Y \in W^\Phi  \\ 
\fj  X \not = Y \\ 
\fa X \subset (X \cup Y), Y \subset (X \cup Y) & 1 теория множеств \\
\fa X \cup Y \vdash \bot &  2 по опр. м.н.м \\
\fa \underline{X}, \underline{Y} \vdash \bot & 3\\
\fa \vdash \neg (\underline{X} \wedge \underline{Y}) & 4 
\end{fitch}
\end{center}
}


\frame{
\begin{block}{Утверждение $\vdash \bigvee \{ \underline{X} \mid X \in W^\Phi \}$}
\end{block}

\resizebox{0.95\textwidth}{!}{ 
\begin{fitch}	
\fh \not \vdash \bigvee \{ \underline{X} \mid X \in W^\Phi \} & $\rhd$ <<$\bot$>> \\
\fa \not \vdash  \underline{X_1} \vee \dots \vee \underline{X_n}, X_i \in W^\Phi &  \\
\fa \forall X_i \in W^\Phi \not \vdash \underline{X_i} & \\
\fa \forall X_i \in W^\Phi \exists \varphi  \in X_i \not \vdash \varphi  &  \\
\fa \not \vdash h(X_1) \vee \dots \vee h(X_n) & $h(X_i):= \varphi \text{ т.ч. } \varphi \in X_i  \text{ и } \not \vdash \varphi$  \\
\fa  \neg h(X_1), \dots, \neg h(X_n) \not \vdash \bot  \\
\fa \{ \neg h(X_1), \dots , \neg h(X_n) \} \subseteq X_j \in W^\Phi & по л. Линд. \\
\fa h(X_j) \in X_j \\
\fa \neg h(X_j) \in X_j \\
\fa \metabot
\end{fitch} 
 }
}


\end{document}